# 변수 사용 영역

## 지역변수

- 범위가 함수 내, 즉 일정 지역에서만 사용하는 변수(함수의 매개변수도 지역변수)

- 지역 변수는 사용 범위가 **블록 내부**로 제한되므로 다른 함수에서는 사용할 수 없음

- 지역 변수는 이름이 같아도 선언된 함수가 다르면 각각 **독립된 저장 공간**을 갖는다

- 사용 가능한 변수가 둘 이상이면 가장 가까운 블록에 선언된 변수를 사용

### 지역 변수 사용의 장점

- 메모리를 효율적으로 사용

  - 지역 변수가 사용한 메모리는 블록이 끝나면 동시에 반환된다.

  - 운영체제는 지역변수가 선언된 함수가 반환되면 할당된 저장 공간을 자동으로 회수하여 재활용 -> 메모리 누수 방지

- 디버깅에 유리

  - 지역 변수는 값에 문제가 있을 때 수정하기 쉽다.

## 전역 변수

- 함수 밖에 변수를 선언하면 전역 변수가 된다

- 전역 변수는 **프로그램 시작과 동시에 할당되어 종료시까지 존재한다.**

- 전역 변수는 특별한 값으로 초기화하지 않아도 **0으로 자동 초기화**된다

- 전역 변수와 지역 변수의 이름이 같으면 지역 변수를 먼저 사용한다.

### 전역 변수의 문제점

- 전역 변수의 이름을 바꾸면 그 변수를 사용하는 모든 함수를 찾아 수정해야 한다.

- 전역 변수의 값이 잘못된 경우 접근 가능한 모든 함수를 의심해야 한다

- 코드 블록 내에 같은 이름의 지역 변수를 선언하면 그 영역에서는 전역 변수를 사용할 수 없다

- 전역 변수는 제한해서 사용하거나 사용하지 않는 게 좋다

## 정적 지역 변수

- 지역 변수를 선언할 때 **static** 예약어를 사용하면 **정적 지역 변수**가 된다

- 정적 지역 변수는 일반 지역 변수와 사용범위가 동일하나 저장 공간이 메모리에 존재하는 기간이 다르다

- 정적 지역 변수는 선언된 함수가 반환되더라도 그 저장 공간을 계속 유지한다.따라서 하나의 함수가 여러 번 호출되는 경우 같은 변수를 공유하는 게 가능하다

- **static**을 사용한 정적 지역 변수는 **프로그램이 실행될 때 메모리에 할당되며 프로그램이 끝날 때까지 존재**

- 정적 지역 변수는 초기화하지 않으면 **0으로 자동 초기화** 된다.

## 레지스터 변수

- 레지스터 변수는 블록 혹은 함수 내에 변수를 선언할 때 **register** 예약어를 사용한다

- 레지스터 변수는 **CPU 안에 있는 저장 공간인 레지스터**를 사용한다

- 레지스터는 CPU 안에 있어 데이터 처리 속도가 가장 빠른 저장 공간이다.

- 따라서 반복문에 쓰는 변수와 같이 사용 횟수가 많은 경우 레지스터에 할당하면 실행 시간을 줄일 수 있다

### 레지스터 변수 사용 시 주의점

- 전역 변수는 레지스터 변수로 선언할 수 없다
  - 레지스터 변수는 CPU의 자원을 잠깐 빌리는 것이므로 프로그램을 실행하는 동안 계속 저장 공간을 확보해야 하는 전역 변수는 레지스터에 할당 할 수 없다
- 레지스터 변수는 주소를 구할 수 없다

  - 레지스터 변수는 저장 공간이 메모리에 있는 것이 아니므로 주소 연산자를 써서 주소를 구할 수 없다

- 레지스터의 사용 여부는 컴파일러가 결정
  - 컴파일러는 사용자가 레지스터 변수를 선언하더라도 레지스터와 메모리 중에 어디에 할당하는 것이 더 이득인지 판단하여 적당한 저장 공간 선택
